<!-- deposit.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Open Deposit â€“ Safe Crypto Vault</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="sidebar">
    <h2>Safe Crypto Vault</h2>
    <ul>
      <li><a href="dashboard.html">ğŸ“Š Dashboard</a></li>
      <li><a href="deposit.html" class="active">â• Open Deposit</a></li>
      <li><a href="withdraw.html">ğŸ’¸ Withdraw</a></li>
      <li><a href="history.html">ğŸ§¾ History</a></li>
      <li><a href="myteam.html">ğŸ‘¥ My Team</a></li>
      <li><a href="admin.html">ğŸ› ï¸ Admin</a></li>
      <li><a href="#" onclick="logout()">ğŸšª Logout</a></li>
    </ul>
  </div>

  <div class="main">
    <h1>Open New Deposit</h1>

    <div class="box">
      <p><strong>USDT Deposit Address (BEP20):</strong></p>
      <p class="mono">0x124377FCe14439248a4959ce528314aA3A897321</p>
      <canvas id="qrCanvas"></canvas>
    </div>

    <div class="box">
      <label>Amount (USDT):</label>
      <input type="number" id="amount" min="10" placeholder="Enter amount" />

      <label>Duration:</label>
      <select id="duration">
        <option value="1m">1 Month</option>
        <option value="3m">3 Months</option>
        <option value="5m">5 Months</option>
      </select>

      <button onclick="confirmDeposit()">I've Sent Deposit</button>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/qrious/dist/qrious.min.js"></script>
  <script>
    const user = JSON.parse(localStorage.getItem("loggedInUser"));
    if (!user) window.location.href = "login.html";

    // QR code
    const qr = new QRious({
      element: document.getElementById("qrCanvas"),
      value: "0x124377FCe14439248a4959ce528314aA3A897321",
      size: 180
    });

    function confirmDeposit() {
      const amount = parseFloat(document.getElementById("amount").value);
      const duration = document.getElementById("duration").value;

      if (isNaN(amount) || amount < 10) {
        alert("Minimum deposit is 10 USDT.");
        return;
      }

      const deposits = JSON.parse(localStorage.getItem("deposits") || "[]");
      deposits.push({
        wallet: user.wallet,
        username: user.username,
        amount,
        duration,
        date: new Date().toISOString(),
        confirmed: false
      });
      localStorage.setItem("deposits", JSON.stringify(deposits));

      alert("Deposit submitted. Await confirmation from admin.");
      window.location.href = "dashboard.html";
    }

    function logout() {
      localStorage.removeItem("loggedInUser");
      window.location.href = "login.html";
    }
  </script>
</body>
</html>
