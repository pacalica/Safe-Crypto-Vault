<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Safe Crypto Vault â€“ Deposit</title>
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background: #000;
      color: #fff;
    }

    .container {
      display: flex;
      min-height: 100vh;
    }

    .sidebar {
      width: 240px;
      background-color: #111;
      padding: 20px;
      box-sizing: border-box;
    }

    .sidebar h2 {
      color: cyan;
      margin-bottom: 20px;
    }

    .sidebar ul {
      list-style: none;
      padding: 0;
    }

    .sidebar ul li {
      margin: 10px 0;
      cursor: pointer;
      color: #ccc;
    }

    .sidebar ul li:hover {
      color: cyan;
    }

    .main {
      flex-grow: 1;
      padding: 30px;
      box-sizing: border-box;
    }

    h1 {
      color: cyan;
    }

    label {
      display: block;
      margin-top: 20px;
    }

    input, select {
      padding: 10px;
      width: 100%;
      margin-top: 8px;
      border-radius: 5px;
      border: none;
      background: #222;
      color: #fff;
    }

    button {
      margin-top: 30px;
      padding: 12px 20px;
      border: none;
      background-color: cyan;
      color: black;
      font-weight: bold;
      cursor: pointer;
      border-radius: 5px;
    }

    .result {
      margin-top: 20px;
      background: #111;
      padding: 15px;
      border-left: 3px solid cyan;
    }

    @media (max-width: 768px) {
      .container {
        flex-direction: column;
      }
      .sidebar {
        width: 100%;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="sidebar">
      <h2>Vault Menu</h2>
      <ul>
        <li onclick="location.href='dashboard.html'">Dashboard</li>
        <li onclick="location.href='deposit.html'">Deposit</li>
        <li onclick="location.href='withdraw.html'">Withdraw</li>
        <li onclick="location.href='history.html'">History</li>
        <li onclick="location.href='team.html'">My Team</li>
        <li onclick="location.href='referral.html'">Affiliate Link</li>
        <li onclick="location.href='settings.html'">Settings</li>
        <li onclick="location.href='security.html'">Security</li>
        <li onclick="logout()">Exit</li>
      </ul>
    </div>

    <div class="main">
      <h1>Open New Deposit</h1>

      <div>
        <label>Available Balance (USDT):</label>
        <div id="balance">Loading...</div>

        <label>Deposit Amount (USDT):</label>
        <input type="number" id="amount" placeholder="Enter amount" />

        <label>Select Duration:</label>
        <select id="duration">
          <option value="1">1 month</option>
          <option value="3">3 months</option>
          <option value="5">5 months</option>
        </select>

        <div class="result" id="summary">
          <strong>Interest:</strong> 0% <br />
          <strong>Estimated Earnings:</strong> 0 USDT <br />
          <strong>Total After Period:</strong> 0 USDT
        </div>

        <button onclick="confirmDeposit()">Confirm Deposit</button>
      </div>
    </div>
  </div>

  <script>
    const balanceEl = document.getElementById("balance");
    const amountEl = document.getElementById("amount");
    const durationEl = document.getElementById("duration");
    const summaryEl = document.getElementById("summary");

    function getUserBalance() {
      const deposits = JSON.parse(localStorage.getItem("deposits") || "[]");
      const withdrawals = JSON.parse(localStorage.getItem("withdrawals") || "[]");

      let totalDeposits = deposits.reduce((sum, d) => sum + parseFloat(d.amount), 0);
      let totalWithdrawals = withdrawals.reduce((sum, w) => sum + parseFloat(w.amount), 0);

      return totalDeposits - totalWithdrawals;
    }

    function updateBalanceDisplay() {
      const balance = getUserBalance();
      balanceEl.innerText = `${balance.toFixed(2)} USDT`;
    }

    function calculateInterest(amount, duration) {
      let rate = 0;
      if (amount >= 0 && amount < 2000) rate = 3.5;
      else if (amount >= 2000 && amount < 5000) rate = 5.5;
      else if (amount >= 5000 && amount <= 10000) rate = 7.5;

      const earnings = (amount * (rate / 100) * duration);
      return {
        rate,
        earnings,
        total: amount + earnings
      };
    }

    function updateSummary() {
      const amount = parseFloat(amountEl.value) || 0;
      const duration = parseInt(durationEl.value);

      const { rate, earnings, total } = calculateInterest(amount, duration);

      summaryEl.innerHTML = `
        <strong>Interest:</strong> ${rate}%<br />
        <strong>Estimated Earnings:</strong> ${earnings.toFixed(2)} USDT<br />
        <strong>Total After Period:</strong> ${total.toFixed(2)} USDT
      `;
    }

    function confirmDeposit() {
      const amount = parseFloat(amountEl.value);
      const duration = parseInt(durationEl.value);
      const username = localStorage.getItem("username");

      if (!amount || amount <= 0) {
        alert("Please enter a valid deposit amount.");
        return;
      }

      const balance = getUserBalance();
      if (amount > balance) {
        alert("Insufficient balance.");
        return;
      }

      const { rate } = calculateInterest(amount, duration);

      const newDeposit = {
        username,
        amount,
        duration,
        interest: rate,
        startDate: new Date().toISOString()
      };

      const deposits = JSON.parse(localStorage.getItem("deposits") || "[]");
      deposits.push(newDeposit);
      localStorage.setItem("deposits", JSON.stringify(deposits));

      alert("Deposit confirmed!");
      window.location.href = "dashboard.html";
    }

    function logout() {
      localStorage.clear();
      window.location.href = "login.html";
    }

    amountEl.addEventListener("input", updateSummary);
    durationEl.addEventListener("change", updateSummary);

    updateBalanceDisplay();
    updateSummary();
  </script>
</body>
</html>
